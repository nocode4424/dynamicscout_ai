<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DynamicScout AI</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="../assets/icon48.png" alt="DynamicScout AI Logo">
        <h1>DynamicScout AI</h1>
      </div>
      <div class="status">
        <span id="status-indicator"></span>
        <span id="status-text">Ready</span>
      </div>
    </header>

    <div class="main-content">
      <!-- Recording Controls (Default View) -->
      <div id="recording-controls" class="panel active">
        <div class="session-info">
          <input type="text" id="session-name" placeholder="Session Name (optional)">
          <p id="url-display" class="url-display">Current page: <span></span></p>
        </div>

        <div class="action-buttons">
          <button id="start-recording" class="btn primary">Start Recording</button>
          <button id="stop-recording" class="btn danger" disabled>Stop Recording</button>
        </div>

        <div class="recording-stats">
          <div id="recording-timer" class="hidden">
            Recording: <span id="timer-value">00:00</span>
          </div>
          <div id="action-counter" class="hidden">
            Actions: <span id="counter-value">0</span>
          </div>
        </div>

        <div class="options">
          <label class="checkbox">
            <input type="checkbox" id="highlight-elements" checked>
            Highlight elements while recording
          </label>
        </div>
      </div>

      <!-- Session Complete View -->
      <div id="session-complete" class="panel">
        <h2>Recording Complete</h2>
        <div class="session-summary">
          <p><strong>Session:</strong> <span id="summary-name"></span></p>
          <p><strong>URL:</strong> <span id="summary-url"></span></p>
          <p><strong>Duration:</strong> <span id="summary-duration"></span></p>
          <p><strong>Actions:</strong> <span id="summary-actions"></span></p>
        </div>

        <div class="action-buttons">
          <button id="upload-recording" class="btn primary">Upload & Analyze</button>
          <button id="view-recordings" class="btn secondary">View All Recordings</button>
          <button id="new-recording" class="btn">New Recording</button>
        </div>
      </div>

      <!-- Recordings List View -->
      <div id="recordings-list" class="panel">
        <h2>Recent Recordings</h2>
        <div class="recordings-container">
          <ul id="recordings"></ul>
        </div>

        <div class="action-buttons">
          <button id="back-to-recording" class="btn secondary">Back</button>
        </div>
      </div>

      <!-- Upload Progress View -->
      <div id="upload-progress" class="panel">
        <h2>Uploading Recording</h2>
        <div class="progress-container">
          <div class="progress-bar">
            <div id="progress-value"></div>
          </div>
          <p id="upload-status">Preparing upload...</p>
        </div>
      </div>

      <!-- Settings View -->
      <div id="settings-panel" class="panel">
        <h2>Settings</h2>
        <div class="settings-form">
          <div class="form-group">
            <label for="api-url">API URL</label>
            <input type="text" id="api-url" placeholder="http://localhost:3000/api">
          </div>
          <div class="form-group">
            <label for="recording-interval">Recording Interval (ms)</label>
            <input type="number" id="recording-interval" min="100" max="5000" step="100">
          </div>
          <div class="form-group checkbox">
            <label>
              <input type="checkbox" id="capture-navigation">
              Capture Page Navigation
            </label>
          </div>
          <div class="form-group checkbox">
            <label>
              <input type="checkbox" id="capture-clicks">
              Capture Click Events
            </label>
          </div>
          <div class="form-group checkbox">
            <label>
              <input type="checkbox" id="capture-inputs">
              Capture Input Events
            </label>
          </div>
        </div>

        <div class="action-buttons">
          <button id="save-settings" class="btn primary">Save Settings</button>
          <button id="cancel-settings" class="btn secondary">Cancel</button>
        </div>
      </div>
    </div>

    <footer>
      <button id="open-settings" class="icon-button" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
          <path fill="currentColor" d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5zm7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65c-.04-.24-.25-.42-.5-.42h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"></path>
        </svg>
      </button>
      <div class="version">v1.0.0</div>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>